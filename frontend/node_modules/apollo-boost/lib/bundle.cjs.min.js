"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("tslib"),t=require("apollo-client"),n=e(t),o=require("apollo-link"),i=require("apollo-cache-inmemory"),c=require("apollo-link-http"),a=require("apollo-link-error"),s=e(require("graphql-tag")),u=require("ts-invariant"),l=["request","uri","credentials","headers","fetch","fetchOptions","clientState","onError","cacheRedirects","cache","name","version","resolvers","typeDefs","fragmentMatcher"],f=function(e){function t(r){void 0===r&&(r={});if(r){var t=Object.keys(r).filter(function(e){return-1===l.indexOf(e)});t.length}var n=r.request,s=r.uri,f=r.credentials,p=r.headers,h=r.fetch,d=r.fetchOptions,b=r.clientState,m=r.cacheRedirects,v=r.onError,y=r.name,g=r.version,k=r.resolvers,O=r.typeDefs,q=r.fragmentMatcher,x=r.cache;u.invariant(!x||!m,1),x||(x=m?new i.InMemoryCache({cacheRedirects:m}):new i.InMemoryCache);var j=v?a.onError(v):a.onError(function(e){var r=e.graphQLErrors;e.networkError;r&&r.map(function(e){e.message,e.locations,e.path;return!0})}),E=!!n&&new o.ApolloLink(function(e,r){return new o.Observable(function(t){var o;return Promise.resolve(e).then(function(e){return n(e)}).then(function(){o=r(e).subscribe({next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)})}).catch(t.error.bind(t)),function(){o&&o.unsubscribe()}})}),w=new c.HttpLink({uri:s||"/graphql",fetch:h,fetchOptions:d||{},credentials:f||"same-origin",headers:p||{}}),M=o.ApolloLink.from([j,E,w].filter(function(e){return!!e})),L=k,P=O,D=q;return b&&(b.defaults&&x.writeData({data:b.defaults}),L=b.resolvers,P=b.typeDefs,D=b.fragmentMatcher),e.call(this,{cache:x,link:M,name:y,version:g,resolvers:L,typeDefs:P,fragmentMatcher:D})||this}return r.__extends(t,e),t}(n);Object.keys(t).forEach(function(e){Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})}),Object.keys(o).forEach(function(e){Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})}),Object.keys(i).forEach(function(e){Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}})}),Object.defineProperty(exports,"HttpLink",{enumerable:!0,get:function(){return c.HttpLink}}),exports.gql=s,exports.default=f;
